<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji Films</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: #1a1a2e;
  color: #eee;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
}

.back-link {
  position: absolute;
  top: 16px;
  left: 16px;
  text-decoration: none;
  color: #888;
  font-size: 0.85rem;
  padding: 6px 14px;
  border: 2px solid #1b2838;
  border-radius: 8px;
  background: #162447;
  transition: all 0.2s;
}

.back-link:hover {
  border-color: #e94560;
  color: #ccc;
  background: #1f3460;
}

header {
  text-align: center;
  margin-bottom: 16px;
}

h1 {
  font-size: 1.8rem;
  color: #e94560;
  margin-bottom: 4px;
}

.subtitle {
  color: #888;
  font-size: 0.95rem;
}

.emoji-container {
  width: 100%;
  max-width: 420px;
  background: #0d1b2a;
  border: 2px solid #1b2838;
  border-radius: 16px;
  padding: 32px 24px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 120px;
}

.emoji-display {
  font-size: 3.5rem;
  text-align: center;
  line-height: 1.4;
  letter-spacing: 8px;
}

.movie-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #e94560;
  margin-bottom: 12px;
  text-align: center;
  min-height: 1.6em;
}

.feedback {
  font-size: 1rem;
  min-height: 1.4em;
  margin-bottom: 16px;
  text-align: center;
}

.feedback.correct {
  color: #4ECDC4;
  font-weight: 700;
}

.feedback.wrong {
  color: #e94560;
}

.choices {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  width: 100%;
  max-width: 420px;
  margin-bottom: 20px;
}

.choice-btn {
  padding: 14px 12px;
  border: 2px solid #1b2838;
  border-radius: 10px;
  background: #162447;
  color: #eee;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.choice-btn:hover:not(:disabled) {
  background: #1f3460;
  border-color: #e94560;
  color: #fff;
}

.choice-btn:disabled {
  cursor: default;
}

.choice-btn.correct-choice {
  border-color: #4ECDC4;
  background: rgba(78, 205, 196, 0.15);
  color: #4ECDC4;
}

.choice-btn.wrong-choice {
  border-color: #e94560;
  background: rgba(233, 69, 96, 0.15);
  color: #e94560;
}

.choice-btn.dimmed {
  opacity: 0.35;
}

.stats-bar {
  display: flex;
  gap: 24px;
  margin-bottom: 16px;
  font-size: 1rem;
  color: #ccc;
  flex-wrap: wrap;
  justify-content: center;
}

.stats-bar span {
  display: flex;
  align-items: center;
  gap: 6px;
}

.stats-bar .label {
  color: #888;
  font-size: 0.85rem;
}

.stats-bar .value {
  color: #fff;
  font-weight: 600;
}

.skip-btn {
  padding: 8px 20px;
  border: 2px solid #1b2838;
  border-radius: 8px;
  background: transparent;
  color: #888;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s;
}

.skip-btn:hover {
  border-color: #e94560;
  color: #ccc;
}

@media (max-width: 600px) {
  body { padding: 12px 10px; }
  h1 { font-size: 1.4rem; }
  header { margin-bottom: 8px; }
  .emoji-container { padding: 24px 16px; margin-bottom: 14px; min-height: 100px; }
  .emoji-display { font-size: 2.8rem; letter-spacing: 6px; }
  .movie-title { font-size: 1.2rem; margin-bottom: 8px; min-height: 1.4em; }
  .feedback { margin-bottom: 10px; }
  .choices { gap: 8px; margin-bottom: 14px; }
  .choice-btn { padding: 12px 8px; font-size: 0.9rem; }
  .stats-bar { gap: 14px; font-size: 0.85rem; margin-bottom: 10px; }
  .back-link {
    position: static;
    display: inline-block;
    margin-bottom: 8px;
  }
}

@media (max-width: 375px) {
  .emoji-container { padding: 20px 12px; }
  .emoji-display { font-size: 2.2rem; letter-spacing: 4px; }
  .choice-btn { padding: 10px 6px; font-size: 0.85rem; }
}
</style>
</head>
<body>

<a class="back-link" href="../">&#8592; Menu</a>

<header>
  <h1>Emoji Films</h1>
  <p class="subtitle">Guess the movie from the emojis!</p>
</header>

<div class="emoji-container">
  <div class="emoji-display" id="emoji-display"></div>
</div>

<div class="movie-title" id="movie-title"></div>

<div class="feedback" id="feedback"></div>

<div class="choices" id="choices"></div>

<div class="stats-bar">
  <span><span class="label">Score:</span> <span class="value" id="score">0</span></span>
  <span><span class="label">Streak:</span> <span class="value" id="streak">0</span></span>
  <span><span class="label">Best Streak:</span> <span class="value" id="best-streak">0</span></span>
</div>

<button class="skip-btn" id="skip-btn" onclick="skipMovie()">Skip / Give Up</button>

<script>
const MOVIES = [
  // Action / Adventure
  { emoji: "ðŸ–ï¸ðŸ©¸", title: "Jaws", genre: "action" },
  { emoji: "â˜ ï¸ðŸ—ï¸", title: "Pirates of the Caribbean", genre: "action" },
  { emoji: "ðŸ•¸ï¸ðŸ“¸", title: "Spider-Man", genre: "action" },
  { emoji: "ðŸƒðŸ”¥", title: "The Dark Knight", genre: "action" },
  { emoji: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦ðŸ", title: "Fast & Furious", genre: "action" },
  { emoji: "ðŸ¸ðŸŽ²", title: "James Bond", genre: "action" },
  { emoji: "ðŸ¥šâš¡ðŸŒ¿", title: "Jurassic Park", genre: "action" },
  { emoji: "ðŸš²ðŸŒ•", title: "E.T.", genre: "action" },
  { emoji: "ðŸ‘¨â€ðŸ‘¦âš”ï¸", title: "Star Wars", genre: "action" },
  { emoji: "ðŸ•³ï¸â³ðŸŒ¾", title: "Interstellar", genre: "action" },
  { emoji: "ðŸŽ“ðŸðŸº", title: "Indiana Jones", genre: "action" },
  { emoji: "âš¡ðŸ‘‘ðŸ”¨", title: "Thor", genre: "action" },
  { emoji: "ðŸ§ŠðŸŽ»ðŸ’”", title: "Titanic", genre: "action" },
  { emoji: "ðŸ‘‘ðŸŒ…ðŸ˜ˆ", title: "The Lion King", genre: "action" },
  { emoji: "ðŸ‘ðŸ”¥âœˆï¸", title: "How to Train Your Dragon", genre: "action" },
  { emoji: "ðŸ¦¾ðŸ’€ðŸ”™", title: "The Terminator", genre: "action" },
  { emoji: "ðŸ¦·ðŸ’‰ðŸƒ", title: "World War Z", genre: "action" },
  { emoji: "ðŸ¹ðŸ’°ðŸŒ²", title: "Robin Hood", genre: "action" },
  { emoji: "âœ‹ðŸ‘±â€â™€ï¸ðŸ™ï¸", title: "King Kong", genre: "action" },
  { emoji: "ðŸ—½ðŸ’¥ðŸ›¸", title: "Independence Day", genre: "action" },

  // Fantasy / Sci-Fi
  { emoji: "ðŸ’ðŸŒ‹", title: "The Lord of the Rings", genre: "fantasy" },
  { emoji: "âš¡ðŸ“œðŸª„", title: "Harry Potter", genre: "fantasy" },
  { emoji: "ðŸ‘­â„ï¸", title: "Frozen", genre: "fantasy" },
  { emoji: "ðŸª”ðŸ§ž", title: "Aladdin", genre: "fantasy" },
  { emoji: "ðŸŒ±ðŸ“¦", title: "WALL-E", genre: "fantasy" },
  { emoji: "ðŸš«ðŸ‘»", title: "Ghostbusters", genre: "fantasy" },
  { emoji: "ðŸ§¬ðŸŸï¸", title: "Jurassic World", genre: "fantasy" },
  { emoji: "ðŸ’¤ðŸŽ¯", title: "Inception", genre: "fantasy" },
  { emoji: "ðŸ’ŠðŸ‡", title: "The Matrix", genre: "fantasy" },
  { emoji: "ðŸŽ©ðŸŽª", title: "The Greatest Showman", genre: "fantasy" },
  { emoji: "âš¡ðŸ›žðŸ“…", title: "Back to the Future", genre: "fantasy" },
  { emoji: "â˜Žï¸ðŸ ðŸ’¡", title: "E.T. the Extra-Terrestrial", genre: "fantasy" },
  { emoji: "ðŸ©¸ðŸ°ðŸŒ™", title: "Dracula", genre: "fantasy" },
  { emoji: "ðŸ—½â›“ï¸", title: "Planet of the Apes", genre: "fantasy" },

  // Drama
  { emoji: "ðŸ¥©ðŸ””ðŸƒ", title: "Rocky", genre: "drama" },
  { emoji: "ðŸŽ¹ðŸšï¸", title: "The Pianist", genre: "drama" },
  { emoji: "ðŸ“ˆðŸ’ŠðŸ›¥ï¸", title: "The Wolf of Wall Street", genre: "drama" },
  { emoji: "ðŸŽ­ðŸ¦…", title: "Birdman", genre: "drama" },
  { emoji: "ðŸ›‹ï¸ðŸˆ", title: "The Blind Side", genre: "drama" },
  { emoji: "ðŸŒ‘ðŸ› ï¸ðŸ™", title: "Apollo 13", genre: "drama" },
  { emoji: "ðŸ…â›µ", title: "Life of Pi", genre: "drama" },
  { emoji: "ðŸ“‹âœ¡ï¸ðŸ­", title: "Schindler's List", genre: "drama" },
  { emoji: "ðŸª¶ðŸ«ðŸ›‘", title: "Forrest Gump", genre: "drama" },
  { emoji: "ðŸŽˆðŸ ", title: "Up", genre: "drama" },
  { emoji: "ðŸŒºðŸ’€ðŸŽ¸", title: "Coco", genre: "drama" },
  { emoji: "ðŸðŸ”¥âœˆï¸", title: "Cast Away", genre: "drama" },
  { emoji: "ðŸ—£ï¸ðŸ‘‘ðŸŽ™ï¸", title: "The King's Speech", genre: "drama" },
  { emoji: "ðŸŒ‰âœŠðŸš¶", title: "Selma", genre: "drama" },
  { emoji: "ðŸŽ²ðŸ©¸", title: "Casino", genre: "drama" },
  { emoji: "ðŸŽ¤ðŸ“‰", title: "A Star Is Born", genre: "drama" },

  // Comedy
  { emoji: "ðŸ”ðŸ‘¶ðŸ ", title: "Finding Nemo", genre: "comedy" },
  { emoji: "ðŸ›ï¸ðŸš€ðŸ‘¨â€ðŸš€", title: "Toy Story", genre: "comedy" },
  { emoji: "ðŸ§…ðŸšï¸", title: "Shrek", genre: "comedy" },
  { emoji: "ðŸ‘ƒðŸ³", title: "Ratatouille", genre: "comedy" },
  { emoji: "ðŸŽµðŸ§ŠðŸ§", title: "Happy Feet", genre: "comedy" },
  { emoji: "ðŸ‘—ðŸ“•ðŸ˜ˆ", title: "The Devil Wears Prada", genre: "comedy" },
  { emoji: "ðŸŽ„ðŸª¤", title: "Home Alone", genre: "comedy" },
  { emoji: "ðŸ¤¥ðŸªµ", title: "Pinocchio", genre: "comedy" },
  { emoji: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ðŸ¦¸ðŸ¤«", title: "The Incredibles", genre: "comedy" },
  { emoji: "âš”ï¸ðŸ‘©â€ðŸ¦°ðŸª–", title: "Mulan", genre: "comedy" },
  { emoji: "âš–ï¸ðŸ¯", title: "Bee Movie", genre: "comedy" },
  { emoji: "ðŸ˜¢ðŸ˜¡ðŸ§ ", title: "Inside Out", genre: "comedy" },
  { emoji: "ðŸ°ðŸ”ðŸ¦Š", title: "Zootopia", genre: "comedy" },
  { emoji: "ðŸª²ðŸ’€ðŸ’’", title: "Beetlejuice", genre: "comedy" },

  // Horror / Thriller
  { emoji: "ðŸš¿ðŸ•³ï¸", title: "Psycho", genre: "thriller" },
  { emoji: "ðŸŽˆðŸ¤¡", title: "It", genre: "thriller" },
  { emoji: "ðŸ¤«ðŸ‘£", title: "A Quiet Place", genre: "thriller" },
  { emoji: "ðŸ“žðŸ˜±", title: "Scream", genre: "thriller" },
  { emoji: "ðŸª“ðŸ‘¯", title: "The Shining", genre: "thriller" },
  { emoji: "ðŸ¥šðŸ©¸ðŸš€", title: "Alien", genre: "thriller" },
  { emoji: "ðŸ”­âš“ðŸ“–", title: "20,000 Leagues Under the Sea", genre: "thriller" },
  { emoji: "ðŸ§…ðŸ•µï¸", title: "Knives Out", genre: "thriller" },
  { emoji: "ðŸ·ðŸ˜¶ðŸ¦‹", title: "The Silence of the Lambs", genre: "thriller" },
  { emoji: "ðŸ“¼7ï¸âƒ£", title: "The Ring", genre: "thriller" },

  // Romance
  { emoji: "ðŸ“–ðŸŒ§ï¸", title: "The Notebook", genre: "romance" },
  { emoji: "ðŸŒ¹ðŸ“š", title: "Beauty and the Beast", genre: "romance" },
  { emoji: "ðŸ‡¬ðŸ‡·ðŸ’’ðŸ½ï¸", title: "My Big Fat Greek Wedding", genre: "romance" },
  { emoji: "ðŸ’»ðŸ“¬", title: "You've Got Mail", genre: "romance" },
  { emoji: "â˜”ðŸŽ¶ðŸ˜Š", title: "Singin' in the Rain", genre: "romance" },
  { emoji: "ðŸ¦µðŸŒŠðŸŽµ", title: "The Little Mermaid", genre: "romance" },
  { emoji: "ðŸ’ƒðŸ•ï¸", title: "Dirty Dancing", genre: "romance" },
  { emoji: "ðŸ‘¸âš”ï¸ðŸ¤µ", title: "The Princess Bride", genre: "romance" },
  { emoji: "ðŸ‘ ðŸ•›", title: "Cinderella", genre: "romance" },
  { emoji: "ðŸ“·ðŸ¥„ðŸ‡«ðŸ‡·", title: "AmÃ©lie", genre: "romance" },
];

const NUM_CHOICES = 4;

let currentMovie = null;
let currentChoices = [];
let revealed = false;
let score = 0;
let streak = 0;
let bestStreak = 0;
let usedMovies = new Set();

function loadStats() {
  score = parseInt(localStorage.getItem('emojifilms_score') || '0');
  streak = parseInt(localStorage.getItem('emojifilms_streak') || '0');
  bestStreak = parseInt(localStorage.getItem('emojifilms_best_streak') || '0');
  updateStatsDisplay();
}

function saveStats() {
  localStorage.setItem('emojifilms_score', score);
  localStorage.setItem('emojifilms_streak', streak);
  localStorage.setItem('emojifilms_best_streak', bestStreak);
}

function updateStatsDisplay() {
  document.getElementById('score').textContent = score;
  document.getElementById('streak').textContent = streak;
  document.getElementById('best-streak').textContent = bestStreak;
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function buildChoices(movie) {
  const sameGenre = MOVIES.filter(m => m.genre === movie.genre && m.title !== movie.title);
  const distractors = shuffle([...sameGenre]).slice(0, NUM_CHOICES - 1);

  if (distractors.length < NUM_CHOICES - 1) {
    const others = MOVIES.filter(m => m.title !== movie.title && !distractors.some(d => d.title === m.title));
    distractors.push(...shuffle([...others]).slice(0, NUM_CHOICES - 1 - distractors.length));
  }

  return shuffle([movie, ...distractors]);
}

function pickMovie() {
  if (usedMovies.size >= MOVIES.length - 4) {
    usedMovies.clear();
  }

  const available = MOVIES.filter(m => !usedMovies.has(m.title));
  const pick = available[Math.floor(Math.random() * available.length)];
  usedMovies.add(pick.title);
  return pick;
}

function newRound() {
  revealed = false;

  document.getElementById('feedback').textContent = '';
  document.getElementById('feedback').className = 'feedback';
  document.getElementById('movie-title').textContent = '';
  document.getElementById('choices').innerHTML = '';
  document.getElementById('skip-btn').textContent = 'Skip / Give Up';

  currentMovie = pickMovie();
  currentChoices = buildChoices(currentMovie);

  document.getElementById('emoji-display').textContent = currentMovie.emoji;
  renderChoices();
}

function renderChoices() {
  const container = document.getElementById('choices');
  container.innerHTML = '';

  currentChoices.forEach((choice, idx) => {
    const btn = document.createElement('button');
    btn.className = 'choice-btn';
    btn.textContent = choice.title;
    btn.addEventListener('click', () => handleChoice(idx));
    container.appendChild(btn);
  });
}

function handleChoice(idx) {
  if (revealed) return;

  const chosen = currentChoices[idx];
  const correct = currentMovie;
  revealed = true;

  document.getElementById('movie-title').textContent = correct.title;

  const allBtns = document.querySelectorAll('.choice-btn');
  allBtns.forEach((b, i) => {
    b.disabled = true;
    if (currentChoices[i].title === correct.title) {
      b.classList.add('correct-choice');
    } else if (i === idx) {
      b.classList.add('wrong-choice');
    } else {
      b.classList.add('dimmed');
    }
  });

  if (chosen.title === correct.title) {
    score += 100;
    streak++;
    if (streak > bestStreak) bestStreak = streak;
    saveStats();
    updateStatsDisplay();

    document.getElementById('feedback').textContent = 'Correct! +100 points';
    document.getElementById('feedback').className = 'feedback correct';
  } else {
    streak = 0;
    saveStats();
    updateStatsDisplay();

    document.getElementById('feedback').textContent = 'Wrong! It was ' + correct.title + '!';
    document.getElementById('feedback').className = 'feedback wrong';
  }

  document.getElementById('skip-btn').textContent = 'Next Movie';
}

function skipMovie() {
  if (revealed) {
    newRound();
    return;
  }

  revealed = true;
  streak = 0;
  saveStats();
  updateStatsDisplay();

  const correct = currentMovie;
  document.getElementById('movie-title').textContent = correct.title;
  document.getElementById('feedback').textContent = 'It was ' + correct.title + '!';
  document.getElementById('feedback').className = 'feedback wrong';
  document.getElementById('skip-btn').textContent = 'Next Movie';

  const allBtns = document.querySelectorAll('.choice-btn');
  allBtns.forEach((b, i) => {
    b.disabled = true;
    if (currentChoices[i].title === correct.title) {
      b.classList.add('correct-choice');
    } else {
      b.classList.add('dimmed');
    }
  });
}

// Init
loadStats();
newRound();
</script>
</body>
</html>
